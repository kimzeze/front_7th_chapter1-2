# ëª…ì„¸: repeatParentId ìƒì„± ë° í• ë‹¹ (ì‘ì—… 009)

## ğŸ“‹ ê°œìš”

**ì‘ì—…**: ë°˜ë³µ ì¼ì • ìƒì„± ì‹œ ë™ì¼í•œ `repeatParentId`ê°€ ìƒì„±ë˜ê³ , ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ì •í™•í•˜ê²Œ í• ë‹¹ë˜ëŠ”ì§€ ê²€ì¦
**ëª©ì **: ë°˜ë³µ ê·¸ë£¹ì„ ì¶”ì í•˜ì—¬ ìˆ˜ì •/ì‚­ì œ ì‹œ ë™ì¼ ê·¸ë£¹ì˜ ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ í•¨ê»˜ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•œ ID ê²€ì¦
**ì˜í–¥ ë²”ìœ„**: `src/utils/recurringEventUtils.ts`ì˜ `generateRecurringEvents()` í•¨ìˆ˜ (ì´ë¯¸ êµ¬í˜„ë¨, ê²€ì¦ í•„ìš”)

---

## ğŸ“ ìš”êµ¬ì‚¬í•­

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **repeatParentId ìƒì„±**

   - ë°˜ë³µ ì´ë²¤íŠ¸ë§ˆë‹¤ ê³ ìœ í•œ UUID ë˜ëŠ” timestamp ê¸°ë°˜ ID ìƒì„±
   - ê° ë°˜ë³µ ê·¸ë£¹ë§ˆë‹¤ í•˜ë‚˜ì˜ ID ìƒì„± (ëª¨ë‘ ë‹¤ë¥´ì§€ ì•ŠìŒ)

2. **repeatParentId í• ë‹¹**

   - ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì´ë²¤íŠ¸ì— ë™ì¼í•œ `repeatParentId` í• ë‹¹
   - ë‹¨ì¼ ì´ë²¤íŠ¸ëŠ” `repeatParentId` ì—†ìŒ (optional)
   - ìˆ˜ì •/ì‚­ì œ ì‹œ ì´ IDë¡œ ê°™ì€ ê·¸ë£¹ ì°¾ê¸° ê°€ëŠ¥

3. **ID ê³ ìœ ì„±**
   - ì„œë¡œ ë‹¤ë¥¸ ë°˜ë³µ ê·¸ë£¹ì€ ì„œë¡œ ë‹¤ë¥¸ `repeatParentId` ë³´ìœ 
   - ì˜ˆ: 1ì›” ë§¤ì£¼ ë°˜ë³µê³¼ 2ì›” ë§¤ì›” ë°˜ë³µì€ ê°ê° ë‹¤ë¥¸ ID

### ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

- ì„±ëŠ¥: ID ìƒì„±ì€ ms ë‹¨ìœ„ ì´ë‚´
- ì•ˆì •ì„±: ëª¨ë“  ì´ë²¤íŠ¸ì— ë™ì¼í•˜ê²Œ í• ë‹¹ë˜ì–´ì•¼ í•¨ (ë°ì´í„° ì¼ê´€ì„±)
- í˜¸í™˜ì„±: UUID í‘œì¤€ ì¤€ìˆ˜ (ë˜ëŠ” timestamp ê¸°ë°˜ êµ¬í˜„)

---

## ğŸ¯ ì˜í–¥ ë²”ìœ„

### í™•ì¸í•  íŒŒì¼

- `src/utils/recurringEventUtils.ts`
  - í•¨ìˆ˜: `generateRecurringEvents`
  - í™•ì¸ ì‚¬í•­: `repeatParentId` ìƒì„± ë° í• ë‹¹

### í™•ì¸í•  íƒ€ì…

```typescript
interface Event extends EventForm {
  id: string;
  repeatParentId?: string; // â† í™•ì¸ ëŒ€ìƒ
}
```

---

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### ì…ë ¥ê°’

```typescript
// ë°˜ë³µ ì´ë²¤íŠ¸ ì„¤ì •
{
  title: "ìŠ¤íƒ ë“œì—…",
  date: "2025-01-15",
  repeat: { type: 'weekly', interval: 1, endDate: '2025-02-05' }
}
```

### ì¶œë ¥ê°’ (ìƒì„±ë  ì´ë²¤íŠ¸ë“¤)

```typescript
// generateRecurringEvents() ë°˜í™˜ê°’
[
  {
    id: "uuid-1",
    title: "ìŠ¤íƒ ë“œì—…",
    date: "2025-01-15",
    repeatParentId: "parent-abc-123", // â† ë™ì¼
    ...
  },
  {
    id: "uuid-2",
    title: "ìŠ¤íƒ ë“œì—…",
    date: "2025-01-22",
    repeatParentId: "parent-abc-123", // â† ë™ì¼
    ...
  },
  {
    id: "uuid-3",
    title: "ìŠ¤íƒ ë“œì—…",
    date: "2025-01-29",
    repeatParentId: "parent-abc-123", // â† ë™ì¼
    ...
  },
  {
    id: "uuid-4",
    title: "ìŠ¤íƒ ë“œì—…",
    date: "2025-02-05",
    repeatParentId: "parent-abc-123", // â† ë™ì¼
    ...
  }
]
```

---

## ğŸš¨ ì—£ì§€ ì¼€ì´ìŠ¤

### 1. ë‹¨ì¼ ì´ë²¤íŠ¸ (repeat.type === 'none')

- ì˜ˆìƒ: `repeatParentId` ì—†ìŒ (undefined ë˜ëŠ” ì œì™¸)
- ì´ìœ : ë°˜ë³µì´ ì—†ìœ¼ë¯€ë¡œ ê·¸ë£¹ ì¶”ì  ë¶ˆí•„ìš”

### 2. ë°˜ë³µ ì´ë²¤íŠ¸ 1ê°œë§Œ ìƒì„± (ì¢…ë£Œì¼ = ì‹œì‘ì¼)

- ì˜ˆ: 1ì›” 15ì¼ë§Œ ìƒì„±
- ì˜ˆìƒ: `repeatParentId` í• ë‹¹ë¨ (ìˆì„ ìˆ˜ ìˆìŒ)
- ì´ìœ : ë°˜ë³µ ì„¤ì •ì´ë¯€ë¡œ ID í• ë‹¹

### 3. ë§ì€ ì´ë²¤íŠ¸ ìƒì„± (365ê°œ)

- ì˜ˆ: 1ë…„ ë§¤ì¼ ë°˜ë³µ
- ì˜ˆìƒ: ëª¨ë‘ ë™ì¼í•œ `repeatParentId` ë³´ìœ 
- ê²€ì¦: ì²« ì´ë²¤íŠ¸ì™€ ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ì˜ IDê°€ ë™ì¼

### 4. ì„œë¡œ ë‹¤ë¥¸ ë°˜ë³µ ì„¤ì •

- ì˜ˆ: 2ê°œ ë°˜ë³µ ê·¸ë£¹ ìƒì„±
- ì˜ˆìƒ: ê°ê° ë‹¤ë¥¸ `repeatParentId`

---

## âœ… í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: 4ê°œ ì´ë²¤íŠ¸ ë°˜ë³µ - ëª¨ë‘ ë™ì¼ ID

```
ì…ë ¥: ë§¤ì£¼ ë°˜ë³µ, 4ì£¼
ì˜ˆìƒ: 4ê°œ ì´ë²¤íŠ¸ì˜ repeatParentId ë™ì¼
ê²€ì¦: events[0].repeatParentId === events[3].repeatParentId
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¨ì¼ ì´ë²¤íŠ¸ - ID ì—†ìŒ

```
ì…ë ¥: repeat.type === 'none'
ì˜ˆìƒ: repeatParentId ì—†ìŒ
ê²€ì¦: events[0].repeatParentId === undefined
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: 2ê°œ ë°˜ë³µ ê·¸ë£¹ - ê°ê° ë‹¤ë¥¸ ID

```
ì…ë ¥:
  - ê·¸ë£¹ 1: ë§¤ì£¼ ë°˜ë³µ 4ì£¼
  - ê·¸ë£¹ 2: ë§¤ì£¼ ë°˜ë³µ 4ì£¼
ì˜ˆìƒ: ê·¸ë£¹ 1ì˜ ID â‰  ê·¸ë£¹ 2ì˜ ID
ê²€ì¦: group1Events[0].repeatParentId !== group2Events[0].repeatParentId
```

### ì‹œë‚˜ë¦¬ì˜¤ 4: ID í˜•ì‹ ê²€ì¦

```
ì…ë ¥: ë°˜ë³µ ì´ë²¤íŠ¸ ìƒì„±
ì˜ˆìƒ: repeatParentIdëŠ” ìœ íš¨í•œ UUID ë˜ëŠ” timestamp ê¸°ë°˜ ID
ê²€ì¦:
  - UUID: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(id)
  - Timestamp: typeof id === 'string' && id.includes('-')
```

### ì‹œë‚˜ë¦¬ì˜¤ 5: ê° ì´ë²¤íŠ¸ì˜ idëŠ” ê³ ìœ 

```
ì…ë ¥: 4ê°œ ì´ë²¤íŠ¸ ë°˜ë³µ
ì˜ˆìƒ: ê° ì´ë²¤íŠ¸ì˜ idëŠ” ëª¨ë‘ ë‹¤ë¦„ (repeatParentIdëŠ” ê°™ìŒ)
ê²€ì¦:
  - ids = [uuid-1, uuid-2, uuid-3, uuid-4] (ëª¨ë‘ ë‹¤ë¦„)
  - parents = [parent-id, parent-id, parent-id, parent-id] (ëª¨ë‘ ê°™ìŒ)
```

---

## ğŸ“Œ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `generateRecurringEvents()`ì—ì„œ `repeatParentId` ìƒì„± (ì´ë¯¸ êµ¬í˜„)
- [x] ëª¨ë“  ë°˜ë³µ ì´ë²¤íŠ¸ì— ë™ì¼í•œ ID í• ë‹¹ (ì´ë¯¸ êµ¬í˜„)
- [ ] ë‹¨ì¼ ì´ë²¤íŠ¸ëŠ” ID ì—†ìŒ (í™•ì¸ í•„ìš”)
- [ ] í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í…ŒìŠ¤íŠ¸ í†µê³¼
