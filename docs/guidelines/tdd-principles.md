# TDD 원칙

## RED-GREEN-REFACTOR 사이클

### 🔴 RED: 실패하는 테스트 작성

- **테스트를 먼저** 작성한다
- 아직 구현되지 않은 기능을 테스트
- 테스트가 **실패하는지 확인** (올바른 이유로)
- 실패 메시지가 명확한지 확인

### 🟢 GREEN: 최소 구현

- **테스트를 통과시키는 최소한의 코드만** 작성
- 과도한 추상화 금지
- 불필요한 기능 추가 금지
- "일단 돌아가게" 만들기

### 🔵 REFACTOR: 개선

- 코드 구조와 품질을 개선
- **테스트는 여전히 통과해야 함**
- 중복 제거
- 네이밍 개선
- 함수 분리

---

## 핵심 규칙

### 1. 테스트 우선

항상 테스트를 먼저 작성한다. 구현 코드는 테스트가 있을 때만 작성한다.

### 2. 작은 단위

한 번에 하나의 테스트만 작성하고, 하나의 기능만 구현한다.

### 3. 테스트 독립성

각 테스트는 다른 테스트에 의존하지 않는다. 순서와 관계없이 실행 가능해야 한다.

### 4. 명확한 의도

테스트 이름만 봐도 무엇을 테스트하는지 알 수 있어야 한다.

### 5. 빠른 피드백

테스트는 빠르게 실행되어야 한다. 느린 테스트는 개발 속도를 저하시킨다.

---

## 테스트 작성 원칙

### AAA 패턴

```typescript
it('테스트 설명', () => {
  // Arrange: 준비 - 테스트에 필요한 데이터 설정
  const input = setupTestData();

  // Act: 실행 - 테스트 대상 함수 실행
  const result = functionToTest(input);

  // Assert: 검증 - 결과 확인
  expect(result).toBe(expected);
});
```

### 하나의 테스트, 하나의 동작

테스트는 하나의 동작만 검증한다. 여러 동작을 검증하려면 테스트를 분리한다.

### 긍정/부정 케이스

- 정상적인 경우 (Happy Path)
- 예외적인 경우 (Edge Cases)
- 에러 상황 (Error Cases)

---

## TDD의 이점

1. **버그 조기 발견**: 개발 중 버그를 즉시 발견
2. **리팩토링 자신감**: 테스트가 있어 안전하게 수정 가능
3. **살아있는 문서**: 테스트 코드가 사용 방법을 설명
4. **설계 개선**: 테스트 가능한 코드는 좋은 설계
5. **회귀 방지**: 기존 기능이 깨지지 않음을 보장

---

## 주의사항

### 하지 말아야 할 것

- ❌ 구현 후 테스트 작성 (테스트는 항상 먼저)
- ❌ 테스트를 위한 구현 코드 수정 (반대로 해야 함)
- ❌ 과도한 테스트 (100% 커버리지가 목표가 아님)
- ❌ 구현 세부사항 테스트 (사용자 관점 테스트)

### 해야 할 것

- ✅ 작은 단위로 반복
- ✅ 실패를 확인하고 통과시키기
- ✅ 리팩토링 후 테스트 재실행
- ✅ 각 단계마다 커밋

---

## 실전 팁

### 막힐 때

1. 더 작은 단위로 쪼개기
2. 이미 아는 것부터 테스트하기
3. 단순한 케이스부터 시작

### 리팩토링 타이밍

- 중복이 보일 때
- 함수가 너무 길 때 (10줄 이상)
- 네이밍이 불명확할 때

### 커밋 전략

```bash
# RED 단계
git commit -m "test: 기능명 테스트 추가 (RED)"

# GREEN 단계
git commit -m "feat: 기능명 구현 (GREEN)"

# REFACTOR 단계
git commit -m "refactor: 기능명 리팩토링 (REFACTOR)"
```
